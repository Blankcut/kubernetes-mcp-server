---
const currentPath = Astro.url.pathname;

const sidebarData = [
  {
    section: 'Getting Started',
    items: [
      { text: 'Introduction', link: '/docs/introduction' },
      { text: 'Quick Start', link: '/docs/quick-start' },
      { text: 'Installation', link: '/docs/installation' },
      { text: 'Configuration', link: '/docs/configuration' },
    ]
  },
  {
    section: 'Core Concepts',
    items: [
      { text: 'Model Context Protocol', link: '/docs/model-context-protocol' },
      { text: 'GitOps Integration', link: '/docs/gitops-integration' },
      { text: 'Claude Integration', link: '/docs/claude-integration' },
    ]
  },
  {
    section: 'API Reference',
    items: [
      { text: 'Overview', link: '/docs/api-overview' },
      { text: 'Authentication', link: '/docs/api-authentication' },
      { text: 'Kubernetes API', link: '/docs/kubernetes-api' },
      { text: 'ArgoCD API', link: '/docs/argocd-api' },
      { text: 'GitLab API', link: '/docs/gitlab-api' },
      { text: 'MCP API', link: '/docs/mcp-api' },
    ]
  },
  {
    section: 'Guides',
    items: [
      { text: 'Troubleshooting Resources', link: '/docs/troubleshooting-resources' },
      { text: 'Analyzing Deployments', link: '/docs/analyzing-deployments' },
      { text: 'Commit Analysis', link: '/docs/commit-analysis' },
      { text: 'Using with ArgoCD', link: '/docs/using-with-argocd' },
      { text: 'Using with GitLab', link: '/docs/using-with-gitlab' },
    ]
  },
  {
    section: 'Examples',
    items: [
      { text: 'Basic Usage', link: '/docs/examples/basic-usage' },
      { text: 'Troubleshooting', link: '/docs/examples/troubleshooting' },
      { text: 'CI/CD Integration', link: '/docs/examples/cicd-integration' },
      { text: 'Custom Prompts', link: '/docs/examples/custom-prompts' },
    ]
  },
  {
    section: 'Advanced',
    items: [
      { text: 'Server Architecture', link: '/docs/server-architecture' },
      { text: 'Custom Integrations', link: '/docs/custom-integrations' },
      { text: 'Security Best Practices', link: '/docs/security-best-practices' },
      { text: 'Production Deployment', link: '/docs/production-deployment' },
    ]
  },
];

---

<aside class="sidebar">
  <div class="mb-6">
    <input 
      type="text" 
      placeholder="Search docs..." 
      class="w-full px-3 py-2 border rounded-md border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800"
    />
  </div>
  
  <nav>
    {sidebarData.map(section => (
      <div class="mb-6">
        <h2 class="font-bold text-sm uppercase tracking-wider text-slate-500 dark:text-slate-400 mb-2">
          {section.section}
        </h2>
        <ul class="space-y-2">
          {section.items.map(item => {
            const isActive = currentPath === item.link || 
                           (currentPath.startsWith(item.link) && item.link !== '/docs/introduction');
            
            return (
              <li>
                <a href={item.link} 
                  class={`block py-1 px-2 rounded-md ${
                    isActive 
                      ? 'bg-primary-50 text-primary-700 dark:bg-primary-900/30 dark:text-primary-400 font-medium' 
                      : 'text-slate-700 hover:text-primary-600 dark:text-slate-300 dark:hover:text-primary-400'
                  }`}
                >
                  {item.text}
                </a>
              </li>
            );
          })}
        </ul>
      </div>
    ))}
  </nav>
</aside>